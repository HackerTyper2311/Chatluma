<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Face-API.js Age Demo</title>

<script src="https://cdn.jsdelivr.net/npm/face-api.js"></script>

<style>
  body { text-align: center; font-family: Arial; }
  video { border: 2px solid #333; margin-top: 10px; }
</style>
</head>
<body>

<h2 id="status">Loading models…</h2>
<video id="video" width="400" autoplay muted></video>

<script>
const video = document.getElementById('video');
const statusText = document.getElementById('status');

Promise.all([
  faceapi.nets.tinyFaceDetector.loadFromUri(
    'https://cdn.jsdelivr.net/npm/face-api.js/models'
  ),
  faceapi.nets.ageGenderNet.loadFromUri(
    'https://cdn.jsdelivr.net/npm/face-api.js/models'
  )
]).then(startVideo);

function startVideo() {
  navigator.mediaDevices.getUserMedia({ video: true })
    .then(stream => {
      video.srcObject = stream;
      statusText.innerText = "Detecting age…";
    });
}

video.addEventListener('play', () => {
  setInterval(async () => {
    const result = await faceapi
      .detectSingleFace(video, new faceapi.TinyFaceDetectorOptions())
      .withAgeAndGender();

    if (result) {
      statusText.innerText =
        `Estimated age: ${Math.round(result.age)}`;
    }
  }, 1000);
});
</script>

</body>
</html>
